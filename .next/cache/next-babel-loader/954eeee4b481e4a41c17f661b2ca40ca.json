{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\HP\\\\OneDrive\\\\Documents\\\\vercel1\\\\vercel1\\\\components\\\\post\\\\post-summary\\\\index.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport React, { useContext } from 'react';\nimport { useRouter } from 'next/router';\nimport Link from 'next/link';\nimport formatDistanceToNowStrict from 'date-fns/formatDistanceToNowStrict';\nimport { AuthContext } from '../../../store/auth';\nimport { FetchContext } from '../../../store/fetch';\nimport Tag from '../../tag';\nimport styles from './post-summary.module.css';\n\nvar PostSummary = function PostSummary(_ref) {\n  _s();\n\n  var _authState$userInfo;\n\n  var tags = _ref.tags,\n      author = _ref.author,\n      created = _ref.created,\n      questionId = _ref.questionId,\n      answerId = _ref.answerId,\n      setQuestion = _ref.setQuestion,\n      children = _ref.children;\n\n  var _useContext = useContext(AuthContext),\n      authState = _useContext.authState,\n      isAdmin = _useContext.isAdmin;\n\n  var _useContext2 = useContext(FetchContext),\n      authAxios = _useContext2.authAxios;\n\n  var router = useRouter();\n\n  var handleDeleteComment = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res, _yield$authAxios$dele, data;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              res = window.confirm('Are you sure delete your post?');\n\n              if (!res) {\n                _context.next = 7;\n                break;\n              }\n\n              _context.next = 4;\n              return authAxios[\"delete\"](answerId ? \"/answer/\".concat(questionId, \"/\").concat(answerId) : \"/question/\".concat(questionId));\n\n            case 4:\n              _yield$authAxios$dele = _context.sent;\n              data = _yield$authAxios$dele.data;\n\n              if (answerId) {\n                setQuestion(data);\n              } else {\n                router.push('/');\n              }\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleDeleteComment() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleApprove = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var res, _yield$authAxios$put, data;\n\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              res = window.confirm('Are you sure approve this question?');\n\n              if (!res) {\n                _context2.next = 7;\n                break;\n              }\n\n              _context2.next = 4;\n              return authAxios.put(answerId ? \"/answer/\".concat(questionId, \"/\").concat(answerId) : \"/question/approve/\".concat(questionId));\n\n            case 4:\n              _yield$authAxios$put = _context2.sent;\n              data = _yield$authAxios$put.data;\n\n              if (answerId) {\n                setQuestion(data);\n              } else {\n                router.push('/');\n              }\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleApprove() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var handleReject = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var res, _yield$authAxios$put2, data;\n\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              res = window.confirm('Are you sure reject this question?');\n\n              if (!res) {\n                _context3.next = 7;\n                break;\n              }\n\n              _context3.next = 4;\n              return authAxios.put(answerId ? \"/answer/\".concat(questionId, \"/\").concat(answerId) : \"/question/reject/\".concat(questionId));\n\n            case 4:\n              _yield$authAxios$put2 = _context3.sent;\n              data = _yield$authAxios$put2.data;\n\n              if (answerId) {\n                setQuestion(data);\n              } else {\n                router.push('/');\n              }\n\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleReject() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: styles.postCell,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 5\n    }\n  }, __jsx(\"div\", {\n    className: styles.text,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }\n  }, children), __jsx(\"div\", {\n    className: styles.footer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: styles.row,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: styles.tagContainer,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, tags === null || tags === void 0 ? void 0 : tags.map(function (tag) {\n    return __jsx(Tag, {\n      key: tag,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 15\n      }\n    }, tag);\n  })), __jsx(\"div\", {\n    className: styles.userDetails,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }, __jsx(Link, {\n    href: \"/users/[user]\",\n    as: \"/users/\".concat(author.username),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 15\n    }\n  }, __jsx(\"img\", {\n    src: \"https://secure.gravatar.com/avatar/\".concat(author.id, \"?s=32&d=identicon\"),\n    alt: author.username,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 17\n    }\n  }))), __jsx(\"div\", {\n    className: styles.info,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, __jsx(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 15\n    }\n  }, tags ? 'asked' : 'answered', ' ', formatDistanceToNowStrict(new Date(created), {\n    addSuffix: true\n  })), __jsx(Link, {\n    href: \"/users/[user]\",\n    as: \"/users/\".concat(author.username),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }\n  }, __jsx(\"a\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, author.username))))), (((_authState$userInfo = authState.userInfo) === null || _authState$userInfo === void 0 ? void 0 : _authState$userInfo.id) === author.id || isAdmin()) && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: styles.row,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }, __jsx(\"a\", {\n    className: styles[\"delete\"],\n    onClick: function onClick() {\n      return handleDeleteComment();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, \"delete\")), __jsx(\"div\", {\n    className: styles.row,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 11\n    }\n  }, __jsx(\"a\", {\n    className: styles[\"delete\"],\n    onClick: function onClick() {\n      return handleApprove();\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 11\n    }\n  }, \"Approve\")))));\n};\n\n_s(PostSummary, \"V+NKd/DT4vZpHfXvcrpxNFTLEUo=\", false, function () {\n  return [useRouter];\n});\n\n_c = PostSummary;\nexport default PostSummary;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostSummary\");","map":{"version":3,"sources":["C:/Users/HP/OneDrive/Documents/vercel1/vercel1/components/post/post-summary/index.js"],"names":["React","useContext","useRouter","Link","formatDistanceToNowStrict","AuthContext","FetchContext","Tag","styles","PostSummary","tags","author","created","questionId","answerId","setQuestion","children","authState","isAdmin","authAxios","router","handleDeleteComment","res","window","confirm","data","push","handleApprove","put","handleReject","postCell","text","footer","row","tagContainer","map","tag","userDetails","username","id","info","Date","addSuffix","userInfo"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react'\nimport { useRouter } from 'next/router'\nimport Link from 'next/link'\nimport formatDistanceToNowStrict from 'date-fns/formatDistanceToNowStrict'\n\nimport { AuthContext } from '../../../store/auth'\nimport { FetchContext } from '../../../store/fetch'\n\nimport Tag from '../../tag'\n\nimport styles from './post-summary.module.css'\n\nconst PostSummary = ({\n  tags,\n  author,\n  created,\n  questionId,\n  answerId,\n  setQuestion,\n  children\n}) => {\n  const { authState, isAdmin } = useContext(AuthContext)\n  const { authAxios } = useContext(FetchContext)\n  const router = useRouter()\n\n  const handleDeleteComment = async () => {\n    const res = window.confirm('Are you sure delete your post?')\n    if (res) {\n      const { data } = await authAxios.delete(\n        answerId\n          ? `/answer/${questionId}/${answerId}`\n          : `/question/${questionId}`\n      )\n\n      if (answerId) {\n        setQuestion(data)\n      } else {\n        router.push('/')\n      }\n    }\n  }\n  const handleApprove = async () => {\n    const res = window.confirm('Are you sure approve this question?')\n    if (res) {\n      const { data } = await authAxios.put(\n        answerId\n          ? `/answer/${questionId}/${answerId}`\n          : `/question/approve/${questionId}`\n      )\n\n      if (answerId) {\n        setQuestion(data)\n      } else {\n        router.push('/')\n      }\n    }\n  }\n  const handleReject = async () => {\n    const res = window.confirm('Are you sure reject this question?')\n    if (res) {\n      const { data } = await authAxios.put(\n        answerId\n          ? `/answer/${questionId}/${answerId}`\n          : `/question/reject/${questionId}`\n      )\n\n      if (answerId) {\n        setQuestion(data)\n      } else {\n        router.push('/')\n      }\n    }\n  }\n\n  return (\n    <div className={styles.postCell}>\n      <div className={styles.text}>{children}</div>\n      <div className={styles.footer}>\n        <div className={styles.row}>\n          <div className={styles.tagContainer}>\n            {tags?.map((tag) => (\n              <Tag key={tag}>{tag}</Tag>\n            ))}\n          </div>\n          <div className={styles.userDetails}>\n            <Link href=\"/users/[user]\" as={`/users/${author.username}`}>\n              <a>\n                <img\n                  src={`https://secure.gravatar.com/avatar/${author.id}?s=32&d=identicon`}\n                  alt={author.username}\n                />\n              </a>\n            </Link>\n            <div className={styles.info}>\n              <span>\n                {tags ? 'asked' : 'answered'}{' '}\n                {formatDistanceToNowStrict(new Date(created), {\n                  addSuffix: true\n                })}\n              </span>\n              <Link href=\"/users/[user]\" as={`/users/${author.username}`}>\n                <a>{author.username}</a>\n              </Link>\n            </div>\n          </div>\n        </div>\n        {(authState.userInfo?.id === author.id || isAdmin()) && (<>\n          <div className={styles.row}>\n            <a className={styles.delete} onClick={() => handleDeleteComment()}>\n              delete\n            </a>\n          </div>\n          <div className={styles.row}>\n          <a className={styles.delete} onClick={() => handleApprove()}>\n            Approve\n          </a>\n        </div>\n        </>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default PostSummary\n"]},"metadata":{},"sourceType":"module"}